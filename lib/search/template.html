<div class='search-container'>
	<div class="search-filter-bar">
		<div class="inner-search-filter-bar">
			<ul class='search-type'>
				<li><a ng-click='type = "unit"' ng-class='{active: type === "unit"}'>Unit</a></li>
				<li><a ng-click='type = "lesson"' ng-class='{active: type === "lesson"}'>Lesson</a></li>
				<li><a ng-click='type = "wiki"' ng-class='{active: type === "wiki"}'>Wiki</a></li>
			</ul>
			<input id='query' ng-model='query' placeholder='Search by keyword, #hash-tag or @author'></input>
			<ul class='search-sort'>
				<li><a ng-click='sort = "-createdAt"' ng-class='{active: sort == "-createdAt"}'>Recent</a></li>
				<li><a ng-click='sort = "-views"' ng-class='{active: sort == "-views"}'>Popular</a></li>
			</ul>
		</div>
	</div>
	<div class='pages-container clearfix'>
		<div ng-repeat='page in pages | filter:{type: type} | orderBy:sort' class="page-overview" ng-class='page.type'>
			<a ng-href='/{{link(page)}}' ng-init='draftText = "Draft"' ng-mouseenter='draftText = "Only You Can See Me"' ng-mouseleave='draftText = "Draft"'>
				<div class='page-image-wrap'  style='background-image: url({{page.image}})' >
					<div ng-show='!page.published' class='draft-text'>{{draftText}}</div>
					<div class='page-title'>{{page.title}}</div>
				</div>
				<div class='page-heel'>
					<div class='page-blurb'>{{page.blurb}}</div>
					<div class='author-info'>
						<span class='name'>by {{page.author}}</span>
						<span class='page-views'>
							{{page.views}} view<span ng-show='page.views!=1'>s</span>
						</span>
						<img ng-src="{{page.author | avatar}}" />
					</div>
				</div>
			</a>
		</div>
	</div>
</div>

